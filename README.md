# Библиотека Requests

<div id="rec290234722" class="r t-rec t-rec_pt_150 t-rec_pb_30 r_showed r_anim" style="padding-top:150px;padding-bottom:30px; " data-record-type="127"><!-- T119 --><div class="t119"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div class="t119__preface t-descr" style="font-size:23px;line-height:1.8;font-weight:400;opacity:0.70;" field="text">Модуль <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">Requests </span></strong>предоставляет возможность управления HTTP-запросами при помощи языка Python. Инструментарий библиотеки широкий и рассчитан на все случаи взаимодействия с web-приложениями. Код, написанный с применением <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">Requests</span></strong>, не является громоздким, легко читается, а функции и методы наглядно настраиваются под специфические нужды. <br> <br>Несмотря на то, что в Python встроен модуль <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">urllib3</span></strong>, обладающий сходным функционалом, практически все применяют <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">Requests</span></strong>, что свидетельствует о его удобстве и простоте. <br></div></div></div></div></div><div id="rec290234723" class="r t-rec t-rec_pt_90 t-rec_pb_15 r_anim r_showed" style="padding-top:90px;padding-bottom:15px; " data-record-type="128"><!-- T120 --><div class="t120"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h2 class="t120__title t-heading t-heading_sm" field="title" style="">1. Основные возможности библиотеки Requests <br></h2> </div> </div></div></div><div id="rec290234724" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Модуль разработан с учетом потребностей современных web-разработчиков и актуальных технологий. Многие операции автоматизированы, а ручные настройки сведены к минимуму. <br> <br>Для понимания инструментария библиотеки перечислим ее основные возможности: <br> – поддержка постоянного HTTP-соединения и его повторное использование; <br> – применение международных и национальных доменов; <br> – использование <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">Cookie</span></strong>: передача и получение значений в формате <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">ключ: значение</span></strong>; <br> – автоматическое декодирование контента; <br> – <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">SSL </span></strong>верификация; <br> – аутентификация пользователей на большинстве ресурсов с сохранением; <br> – поддержка proxy при необходимости; <br> – загрузка и выгрузка файлов; <br> – стриминговые загрузки и фрагментированные запросы; <br> – задержки соединений; <br> – передача требуемых заголовков на web-ресурсы и др. <br> <br>В целом, практически любая задача, которая возникает у разработчика, нашла свое отражение в коде библиотеки. Важно понимать, что <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">Requests</span></strong> не предназначен для парсинга ответа сервера (для этого применяют другие модули, например, <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">Beautiful Soup</span></strong>). <br></div></div></div></div></div><div id="rec290234725" class="r t-rec t-rec_pt_90 t-rec_pb_15 r_anim r_showed" style="padding-top:90px;padding-bottom:15px; " data-record-type="128"><!-- T120 --><div class="t120"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h2 class="t120__title t-heading t-heading_sm" field="title" style="">2. Первичная настройка и начало работы <br></h2> </div> </div></div></div><div id="rec290234726" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;"><strong></strong>Первым делом установим библиотеку в требуемую папку (через консоль). <br></div></div></div></div></div><div id="rec290234727" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Консоль/Терминал <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs">pip install requests <span class="hljs-comment"># Для Windows</span>
pip3 install requests <span class="hljs-comment"># Для Linux, MacOS</span></code></pre> </div> </div> </div></div></div><div id="rec290234728" class="r t-rec t-rec_pt_0 t-rec_pb_60 r_anim r_showed" style="padding-top:0px;padding-bottom:60px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Эта команда установит <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">Requests </span></strong>и дополнительные зависимые модули. <br></div></div></div></div></div><div id="rec291352066" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px;background-color:#fffad8; " data-record-type="106" data-bg-color="#fffad8" data-animationappear="off"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;"><strong>Полезно знать<br></strong>Согласно рекомендациям официальной документации Python можно применять и другой способ установки библиотек, который позволяет контролировать версию языка, запускать библиотеку напрямую из консоли.</div></div></div></div></div><div id="rec290234729" class="r t-rec t-rec_pt_30 t-rec_pb_75" style="padding-top:30px;padding-bottom:75px;background-color:#fffad8; " data-animationappear="off" data-record-type="285" data-bg-color="#fffad8"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Консоль/Терминал - Примеры альтернативной установки <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;background-color: #ffffff;"><pre><code class="python hljs">python -m pip install requests <span class="hljs-comment"># Установит библиотеку для последней версии Python</span>
python3<span class="hljs-number">.7</span> -m pip install requests <span class="hljs-comment"># Requests для Python 3.7</span></code></pre> </div> </div> </div></div> </div><div id="rec290234731" class="r t-rec t-rec_pt_90 t-rec_pb_0 r_anim r_showed" style="padding-top:90px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Чтобы проверить, что все прошло успешно, сделаем простой <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">GET </span></strong>запрос на сайт <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">https://github.com</span></strong>. <br></div></div></div></div></div><div id="rec291423772" class="r t-rec t-rec_pt_45 t-rec_pb_30" style="padding-top:45px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> requests
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.get(<span class="hljs-string">'https://github.com'</span>)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response
&lt;Response [<span class="hljs-number">200</span>]&gt;</code></pre> </div> </div> </div></div> </div><div id="rec290234733" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Никаких ошибок не получено, следовательно, запрос прошел успешно. Ответ от сервера сохраняем в объект response. В нем содержится вся необходимая информация для анализа, которую нам предоставил сервис. Рассмотрим основные атрибуты данного объекта (в примерах ниже часть ответов сервера будет вырезана, чтобы не загромождать пространство). <br></div></div></div></div></div><div id="rec291424828" class="r t-rec t-rec_pt_45 t-rec_pb_30" style="padding-top:45px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>dir(response)
[…, <span class="hljs-string">'apparent_encoding'</span>, <span class="hljs-string">'close'</span>, <span class="hljs-string">'connection'</span>, <span class="hljs-string">'content'</span>, <span class="hljs-string">'cookies'</span>, <span class="hljs-string">'elapsed'</span>, <span class="hljs-string">'encoding'</span>, <span class="hljs-string">'headers'</span>, <span class="hljs-string">'history'</span>, <span class="hljs-string">'is_permanent_redirect'</span>, <span class="hljs-string">'is_redirect'</span>, <span class="hljs-string">'iter_content'</span>, <span class="hljs-string">'iter_lines'</span>, <span class="hljs-string">'json'</span>, <span class="hljs-string">'links'</span>, <span class="hljs-string">'next'</span>, <span class="hljs-string">'ok'</span>, <span class="hljs-string">'raise_for_status'</span>, <span class="hljs-string">'raw'</span>, <span class="hljs-string">'reason'</span>, <span class="hljs-string">'request'</span>, <span class="hljs-string">'status_code'</span>, <span class="hljs-string">'text'</span>, <span class="hljs-string">'url'</span>]</code></pre> </div> </div> </div></div> </div><div id="rec290234735" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">К любому из этих атрибутов можно обратиться, чтобы получить более детальную информацию. <br></div></div></div></div></div><div id="rec291425215" class="r t-rec t-rec_pt_90 t-rec_pb_0" style="padding-top:90px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">1. Атрибут 'headers' <br></h3> </div> </div></div></div><div id="rec291425290" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>response.headers
{<span class="hljs-string">'Server'</span>: <span class="hljs-string">'GitHub.com'</span>, <span class="hljs-string">'Date'</span>: <span class="hljs-string">'Fri, 05 Mar 2021 09:47:19 GMT'</span>, <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/html; charset=utf-8'</span>, …}</code></pre> </div> </div> </div></div>  </div><div id="rec291425363" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Свойство позволяет просмотреть заголовки ответа сервера: его тип, дату обращения, формат содержимого, кодировку и др. <br></div></div></div></div></div><div id="rec291425491" class="r t-rec t-rec_pt_90 t-rec_pb_0" style="padding-top:90px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">2. Атрибуты: 'status_code', 'ok' <br></h3> </div> </div></div></div><div id="rec291425581" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>response.status_code
<span class="hljs-number">200</span>
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.ok
<span class="hljs-keyword">True</span></code></pre> </div> </div> </div></div> </div><div id="rec291425629" class="r t-rec t-rec_pt_0 t-rec_pb_60 r_anim r_showed" style="padding-top:0px;padding-bottom:60px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Код статуса <span style="color: rgb(0, 124, 119);"><strong>200</strong> </span>говорит о том, что запрашиваемый сайт обнаружен, и мы от него получили успешный ответ. <br></div></div></div></div></div><div id="rec291426083" class="r t-rec t-rec_pt_75 t-rec_pb_60" style="padding-top:75px;padding-bottom:60px;background-color:#fffad8; " data-record-type="106" data-bg-color="#fffad8" data-animationappear="off"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;"><strong>Важно знать<br></strong> Коды <span style="color: rgb(0, 124, 119);"><strong>HTTP-ответов</strong> </span>показывают успешность выполнения запросов к серверу. Их группируют по <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">5</span></strong> классам: <br> – информационного характера (<strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">100-199</span></strong>) – разного рода подсказки, призывы к продолжению промежуточных действий <br> – успешные (<strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">200-299</span></strong>) – запрос обработан, ответ получен, содержимого нет, но присланы заголовки и т.п. <br> – коды перенаправления (<strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">300-399</span></strong>) – пользователь перенаправляется по другой ссылке <br> – ошибки на стороне клиента (<strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">400-499</span></strong>) – пользователь не авторизован, нет такой страницы, запрещен доступ и др. <br> – ошибки на сервере (<strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">500-599</span></strong>) – сервис не доступен по каким-либо причинам, метод запроса им не поддерживается. <br></div></div></div></div></div><div id="rec291426379" class="r t-rec t-rec_pt_30 t-rec_pb_0 r_anim r_showed" style="padding-top:30px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Благодаря возможности проверять статус ответа, мы можем по-разному реагировать исходя из этого. Свойство <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">ok </span></strong>более общее. Удобно, когда нужно убедиться, что все хорошо (под этим понимаются ответы с кодами от <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">200</span> </strong>до <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">399</span></strong>). <br></div></div></div></div></div><div id="rec291427407" class="r t-rec t-rec_pt_75 t-rec_pb_0" style="padding-top:75px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">3. Атрибуты: 'url', 'request' <br></h3> </div> </div></div></div><div id="rec291427500" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>response.request
&lt;PreparedRequest [GET]&gt;
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.url
<span class="hljs-string">'https://github.com/'</span></code></pre> </div> </div> </div></div> </div><div id="rec291427557" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Приведенные свойства предоставляют информацию о методе запроса (<strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">GET</span></strong>, <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">POST </span></strong>и др.) и запрашиваемой ссылке со всеми дополнительными параметрами. <br></div></div></div></div></div><div id="rec291427607" class="r t-rec t-rec_pt_75 t-rec_pb_0" style="padding-top:75px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">4. Атрибуты: 'text', 'content', 'json' <br></h3> </div> </div></div></div><div id="rec291427718" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>response.text
<span class="hljs-string">'\n\n\n\n\n&lt;!DOCTYPE html&gt;\n&lt;html lang="en"  class="html-fluid"&gt;\n  &lt;head&gt;\n	&lt;meta charset="utf-8"&gt;\n  &lt;link rel="dns-prefetch" href="https://github.githubassets.com"&gt;\n  &lt;link rel="dns-prefetch" href="https://user-images.githubusercontent.com/"&gt;…
&gt;&gt;&gt; response.content
b'</span>\n\n\n\n\n&lt;!DOCTYPE html&gt;\n&lt;html lang=<span class="hljs-string">"en"</span>  <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">html</span>-<span class="hljs-title">fluid</span>"&gt;\<span class="hljs-title">n</span>  &lt;<span class="hljs-title">head</span>&gt;\<span class="hljs-title">n</span>	&lt;<span class="hljs-title">meta</span> <span class="hljs-title">charset</span>="<span class="hljs-title">utf</span>-8"&gt;\<span class="hljs-title">n</span>  &lt;<span class="hljs-title">link</span> <span class="hljs-title">rel</span>="<span class="hljs-title">dns</span>-<span class="hljs-title">prefetch</span>" <span class="hljs-title">href</span>="<span class="hljs-title">https</span>:</span>//github.githubassets.com<span class="hljs-string">"&gt;\n  &lt;link rel="</span>dns-prefetch<span class="hljs-string">" href="</span>https://avatars.githubusercontent.com<span class="hljs-string">"&gt;…
&gt;&gt;&gt; response.json()
Error…</span></code></pre> </div> </div> </div></div> </div><div id="rec291427879" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;"><strong></strong>Свойство <span style="color: rgb(0, 124, 119);"><strong>text</strong> </span>показывает тело ответа сервера в текстовом формате (актуально для html-страниц), <span style="color: rgb(0, 124, 119);"><strong>content</strong> </span>– результат в виде байтов (удобно при скачивании графической, аудио- или видеоинформации), метод <span style="color: rgb(0, 124, 119);"><strong>json()</strong> </span>приводит содержимое ответа к обычному словарю (если данные к нему приводимы, в противном случае будет ошибка, как в примере; актуально для API-запросов). <br></div></div></div></div></div><div id="rec290234738" class="r t-rec t-rec_pt_90 t-rec_pb_15 r_anim r_showed" style="padding-top:90px;padding-bottom:15px; " data-record-type="128"><!-- T120 --><div class="t120"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h2 class="t120__title t-heading t-heading_sm" field="title" style="">3. Разные типы HTTP-запросов <br></h2> </div> </div></div></div><div id="rec290234739" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;"><strong></strong>Для получения содержимого web-страницы используется метод <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">GET</span></strong>, работу которого мы показали выше. Библиотека <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">Requests </span></strong>позволяет обращаться к сервисам с помощью других запросов, если они разрешены на сервере. Чтобы полноценно продемонстрировать его работу, разработчики библиотеки создали специальный сайт <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">https://httpbin.org/</span></strong>, на котором можно их опробовать. <br></div></div></div></div></div><div id="rec291428197" class="r t-rec t-rec_pt_30 t-rec_pb_30 r_anim r_showed" style="padding-top:30px;padding-bottom:30px; " data-record-type="3"><!-- T107 --><div class="t107"> <div class="t-align_center" itemscope="" itemtype="http://schema.org/ImageObject"><meta itemprop="image" content="https://static.tildacdn.com/tild6434-3833-4830-b636-326263323865/1_4.png"><meta itemprop="caption" content="HTTP методы"> <img src="https://thumb.tildacdn.com/tild6434-3833-4830-b636-326263323865/-/format/webp/1_4.png" data-original="https://static.tildacdn.com/tild6434-3833-4830-b636-326263323865/1_4.png" class="t107__widthauto t-img loaded" imgfield="img" alt="HTTP методы"> <div class="t-container_8"><div class="t-col t-col_8 t107__title t-text" style="" field="title" itemprop="name">HTTP методы</div></div> </div> </div></div><div id="rec291429181" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">1. Метод OPTIONS <br></h3> </div> </div></div></div><div id="rec290234749" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">С помощью данного метода мы увидим принимаемые ресурсом или конкретным его разделом HTTP-запросы (просмотр опций включен не у всех ресурсов). <br></div></div></div></div></div><div id="rec291429270" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.options(<span class="hljs-string">'https://httpbin.org/'</span>)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.headers[<span class="hljs-string">'Access-Control-Allow-Methods'</span>]
GET, POST, PUT, DELETE, PATCH, OPTIONS</code></pre> </div> </div> </div></div> </div><div id="rec291429430" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Как видим, на сайте имеется возможность протестировать практически все виды HTTP-запросов. <br></div></div></div></div></div><div id="rec291429557" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">2. Метод GET <br></h3> </div> </div></div></div><div id="rec290234751" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">У <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">GET-запросов</span></strong> могут присутствовать параметры, которыми легко управлять. Например: <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">https://site.ru/?text=python&amp;lang=ru</span></strong> (ищем сайты про Python на русском языке на некоем условном поисковике). Для этого есть именованный аргумент <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">params</span></strong>. Предположим, требуется <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">11 </span></strong>страница в категории автомобили. <br></div></div></div></div></div><div id="rec291429687" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>get_params = {<span class="hljs-string">'page'</span>: <span class="hljs-number">11</span>, <span class="hljs-string">'product'</span>: <span class="hljs-string">'car'</span>}
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.get(<span class="hljs-string">'https://httpbin.org/'</span>, params=get_params)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.url
<span class="hljs-string">'https://httpbin.org/?page=11&amp;product=car'</span></code></pre> </div> </div> </div></div></div><div id="rec291429792" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Ссылка успешно сформирована и передана на сервис. <br></div></div></div></div></div><div id="rec291429891" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">3. Метод POST <br></h3> </div> </div></div></div><div id="rec291429940" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Для отправки данных (например, форм) применяют метод <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">POST </span></strong>библиотеки <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">Requests</span></strong>. В аргументе <span style="color: rgb(0, 124, 119);"><strong>data</strong> </span>указываются все требуемые поля. Ответом будет <span style="color: rgb(0, 124, 119);"><strong>json-объект</strong> </span>с переданными данными, а также ряд иных сведений (заголовки, ip-адрес, ссылка). <br></div></div></div></div></div><div id="rec291430028" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>post_params = {<span class="hljs-string">'user'</span>: <span class="hljs-string">'admin'</span>, <span class="hljs-string">'password'</span>: <span class="hljs-string">'admin_pass1'</span>}
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.post(<span class="hljs-string">'https://httpbin.org/post'</span>, data=post_params)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.json()[<span class="hljs-string">'form'</span>]
{<span class="hljs-string">'password'</span>: <span class="hljs-string">'admin_pass1'</span>, <span class="hljs-string">'user'</span>: <span class="hljs-string">'admin'</span>}</code></pre> </div> </div> </div></div> </div><div id="rec291430133" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">4. Метод HEAD <br></h3> </div> </div></div></div><div id="rec291430255" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Аналогичен запросу <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">GET </span></strong>по своей сути, но может служить предварительным тестом ресурса, с которого планируется скачивать файл большого размера. Если заголовки получены, то все хорошо и можно приступать к загрузке. <br></div></div></div></div></div><div id="rec291430312" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.head(<span class="hljs-string">'https://httpbin.org/'</span>)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.headers
{<span class="hljs-string">'Date'</span>: <span class="hljs-string">'Sat, 06 Mar 2021 11:40:49 GMT'</span>, <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/html; charset=utf-8'</span>, <span class="hljs-string">'Content-Length'</span>: <span class="hljs-string">'9593'</span>, <span class="hljs-string">'Connection'</span>: <span class="hljs-string">'keep-alive'</span>, <span class="hljs-string">'Server'</span>: <span class="hljs-string">'gunicorn/19.9.0'</span>, <span class="hljs-string">'Access-Control-Allow-Origin'</span>: <span class="hljs-string">'*'</span>, <span class="hljs-string">'Access-Control-Allow-Credentials'</span>: <span class="hljs-string">'true'</span>}</code></pre> </div> </div> </div></div> </div><div id="rec291430418" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">5. Метод PUT <br></h3> </div> </div></div></div><div id="rec291430518" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Представленный метод является идемпотентным. Это значит, что повторная отправка идентичных данных никак не повлияет на работу ресурса. Если использовать метод <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">POST</span></strong>, то возможны ошибки. <br></div></div></div></div></div><div id="rec291430621" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>put_params = {<span class="hljs-string">'user'</span>: <span class="hljs-string">'admin'</span>, <span class="hljs-string">'password'</span>: <span class="hljs-string">'admin_pass1'</span>}
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.put(<span class="hljs-string">'https://httpbin.org/put'</span>, data=put_params)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.status_code
<span class="hljs-number">200</span>
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.put(<span class="hljs-string">'https://httpbin.org/'</span>, data=put_params)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.status_code
<span class="hljs-number">405</span></code></pre> </div> </div> </div></div> </div><div id="rec291430674" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">В первом случае запрос отработал удачно (о чем говорит код <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">200</span></strong>), тогда как во втором – нет (<strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">405 </span></strong>код – неразрешенный метод по указанному адресу). <br></div></div></div></div></div><div id="rec291430744" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">6. Метод PATCH <br></h3> </div> </div></div></div><div id="rec291430794" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Предполагает частичное обновление данных на сервере. <br></div></div></div></div></div><div id="rec291430866" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>patch_params = {<span class="hljs-string">'user'</span>: <span class="hljs-string">'new_admin'</span>, <span class="hljs-string">'password'</span>: <span class="hljs-string">'new_pass'</span>}
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.patch(<span class="hljs-string">'https://httpbin.org/patch'</span>, data=patch_params)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.status_code
<span class="hljs-number">200</span></code></pre> </div> </div> </div></div> </div><div id="rec291430908" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Чаще всего применяется для изменения содержимого конфигурационных файлов (например, вы поменяли токен для доступа к API). <br></div></div></div></div></div><div id="rec291430989" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">7. Метод DELETE <br></h3> </div> </div></div></div><div id="rec291431045" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Когда требуется удаление некоего ресурса. <br></div></div></div></div></div><div id="rec291431126" class="r t-rec t-rec_pt_30 t-rec_pb_60" style="padding-top:30px;padding-bottom:60px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>del_params = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"Николай"</span>, <span class="hljs-string">"job"</span>: <span class="hljs-string">"Повар"</span>}
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.delete(<span class="hljs-string">'https://httpbin.org/delete'</span>, data=del_params)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.json()[<span class="hljs-string">'form'</span>]
{<span class="hljs-string">'job'</span>: <span class="hljs-string">'Повар'</span>, <span class="hljs-string">'name'</span>: <span class="hljs-string">'Николай'</span>}</code></pre> </div> </div> </div></div> </div><div id="rec292167067" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px;background-color:#fffad8; " data-animationappear="off" data-record-type="65" data-bg-color="#fffad8"><div class="t403"> <div class="t403__container-table t-width_8" style="background-color: #fffad8;"> <a class="t403__link" href="/courses/python/lesson-5"> <div class="t403__tcol1"> <div class="t403__imgbox" style="height: 400px;"> <div class="t403__img t-bgimg loaded" data-original="https://static.tildacdn.com/tild3033-3061-4933-a637-363234383366/entregador-enviando-.jpg" style="background-image: url(&quot;https://thumb.tildacdn.com/tild3033-3061-4933-a637-363234383366/-/cover/760x800/center/center/-/format/webp/entregador-enviando-.jpg&quot;);" src=""></div> </div> </div> <div class="t403__tcol2" style="border-color: #fffad8;"> <div class="t403__textwrapper"> <div class="t403__title t-title t-title_xxs" style="font-size:20px;line-height:1.8;font-weight:500;">Программирование на Python. Урок 5. Модули и пакеты. Импорт.</div> <div class="t403__descr t-descr t-descr_sm" style="font-size:15px;line-height:1.8;font-weight:400;">Рассматриваем модули и пакеты из стандартной библиотеки Python и PyPI. Учимся использовать инструкции import и from..import и различать абсолютный и относительный импорт. Разбираемся с виртуальными пространствами venv. Создаем собственные модули.</div> </div> </div> </a> </div> </div></div><div id="rec290234754" class="r t-rec t-rec_pt_120 t-rec_pb_15 r_anim r_showed" style="padding-top:120px;padding-bottom:15px; " data-record-type="128"><!-- T120 --><div class="t120"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h2 class="t120__title t-heading t-heading_sm" field="title" style="">4. Практика: скачивание файлов <br></h2> </div> </div></div></div><div id="rec290234755" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Предположим, перед нами стала задача скачать картинку с определенного сайта и сохранить ее к себе. Проще, конечно, это сделать руками, но когда у вас будет список из хотя бы <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">100</span> </strong>фотографий, проблема автоматизации будет очевидной. Продемонстрируем <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">2 </span></strong>способа применения библиотеки Requests для загрузки фото. <br></div></div></div></div></div><div id="rec291431769" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">Способ 1 – Единовременная загрузка изображения <br></h3> </div> </div></div></div><div id="rec291431929" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – IDE <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-keyword">import</span> requests
 
response = requests.get(<span class="hljs-string">'https://www.hdwallpapers.in/download/colorful_glowing_shape_lines_4k_8k_hd_abstract-HD.jpg'</span>)
<span class="hljs-keyword">with</span> open(<span class="hljs-string">'img.jpg'</span>, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> picture:
    picture.write(response.content)</code></pre> </div> </div> </div></div> </div><div id="rec291432095" class="r t-rec t-rec_pt_60 t-rec_pb_60 r_anim r_showed" style="padding-top:60px;padding-bottom:60px; " data-record-type="3"><!-- T107 --><div class="t107"> <div class="t-align_center" itemscope="" itemtype="http://schema.org/ImageObject"><meta itemprop="image" content="https://static.tildacdn.com/tild3462-3730-4339-b532-646165363861/2_4.png"><meta itemprop="caption" content="Скачивание изображения с помощью библиотеки requests "> <img src="https://thumb.tildacdn.com/tild3462-3730-4339-b532-646165363861/-/format/webp/2_4.png" data-original="https://static.tildacdn.com/tild3462-3730-4339-b532-646165363861/2_4.png" class="t107__widthauto t-img loaded" imgfield="img" alt="Скачивание изображения с помощью библиотеки requests "> <div class="t-container_8"><div class="t-col t-col_8 t107__title t-text" style="" field="title" itemprop="name">Скачивание изображения с помощью библиотеки requests</div></div> </div> </div></div><div id="rec291433639" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Фото специально выбрано большого размера для теста. Минус первого способа таков: если на сервере произойдет ошибка во время скачивания, то все что вы делали, потеряется. Более того, сам файл займет солидную часть в памяти (а если это фильм на 50 Гб?). Достаточно неудобно. <br></div></div></div></div></div><div id="rec291433688" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px; " data-animationappear="off" data-record-type="65"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="color:#6b6b6b;">Способ 2 – Запись файла частями <br></h3> </div> </div></div></div><div id="rec291433799" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – IDE <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;background-color: #fafafa;"><pre><code class="python hljs"><span class="hljs-keyword">import</span> requests
 
response = requests.get(<span class="hljs-string">'https://www.hdwallpapers.in/download/colorful_glowing_shape_lines_4k_8k_hd_abstract-HD.jpg'</span>,
                    	stream=<span class="hljs-keyword">True</span>)
<span class="hljs-keyword">with</span> open(<span class="hljs-string">'img.jpg'</span>, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> picture:
    <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> response.iter_content(chunk_size=<span class="hljs-number">10000</span>):
    	<span class="hljs-keyword">if</span> chunk:
        	    picture.write(chunk)
 </code></pre> </div> </div> </div></div> </div><div id="rec291433901" class="r t-rec t-rec_pt_0 t-rec_pb_60 r_anim r_showed" style="padding-top:0px;padding-bottom:60px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Во-первых, мы добавили параметр<strong> <span data-redactor-tag="span" style="color: rgb(0, 124, 119);">stream=True</span></strong> к методу <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">get()</span></strong> . Это гарантирует постепенную загрузку фотографии, что не позволит переполнять память. Метод <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">iter_content()</span> </strong>скачивает картинку частями (в нашем случае – по 10 Кб). Таким образом, мы «дописываем» изображение новыми кусками на каждой итерации, а если связь с сервером будет потеряна, то на ПК останется хотя бы часть фото. <br></div></div></div></div></div><div id="rec292172878" class="r t-rec t-rec_pt_60 t-rec_pb_0" style="padding-top:60px;padding-bottom:0px;background-color:#fffad8; " data-animationappear="off" data-record-type="65" data-bg-color="#fffad8"><!-- T056 --><div class="t056"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h3 class="t056__title t-name t-name_xl" field="title" style="font-size:25px;">Читайте также</h3> </div> </div></div></div><div id="rec292172880" class="r t-rec t-rec_pt_15 t-rec_pb_60" style="padding-top:15px;padding-bottom:60px;background-color:#fffad8; " data-animationappear="off" data-record-type="403" data-bg-color="#fffad8"><!-- T403 --><div class="t403"> <div class="t403__container-table t-width_8" style="background-color: #fffad8;"> <a class="t403__link" href="/blog/python-files"> <div class="t403__tcol1"> <div class="t403__imgbox"> <div class="t403__img t-bgimg loaded" data-original="https://static.tildacdn.com/tild6432-3936-4635-b564-626132396463/Smartiqa_python_file.png" style="background-image: url(&quot;https://thumb.tildacdn.com/tild6432-3936-4635-b564-626132396463/-/cover/760x570/center/center/-/format/webp/Smartiqa_python_file.png&quot;);" src=""></div> <div class="t403__separator"></div> </div> </div> <div class="t403__tcol2" style="border-color: #fffad8;"> <div class="t403__textwrapper"> <div class="t403__title t-title t-title_xxs" style="font-size:20px;line-height:1.8;font-weight:500;">Работа с файлами в Python: функция open()</div> <div class="t403__descr t-descr t-descr_sm" style="font-size:15px;line-height:1.8;font-weight:400;">Запись, чтение и дополнение файлов при помощи функции open(). Основные режимы работы, кодирование</div> </div> </div> </a> </div> </div></div><div id="rec290234775" class="r t-rec t-rec_pt_90 t-rec_pb_15 r_anim r_showed" style="padding-top:90px;padding-bottom:15px; " data-record-type="128"><!-- T120 --><div class="t120"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h2 class="t120__title t-heading t-heading_sm" field="title" style="">5. Практика: авторизация на сайте <br></h2> </div> </div></div></div><div id="rec290234776" class="r t-rec t-rec_pt_30 t-rec_pb_0 r_anim r_showed" style="padding-top:30px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Так как на большинстве сайтов авторизация является защищенной и сложной, использовать модуль <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">Requests </span></strong>не всегда получится. В некоторых случаях потребуется ключ для API того или иного ресурса. <br> <br>Рассмотрим <a href="https://api.github.com"><span style="color: rgb(0, 124, 119);"><strong>https://api.github.com</strong></span></a>, который разрешает аутентификацию через токен. Его можно получить на сайте в настройках вашего персонального профиля: <br></div></div></div></div></div><div id="rec291434221" class="r t-rec t-rec_pt_30 t-rec_pb_30 r_anim r_showed" style="padding-top:30px;padding-bottom:30px; " data-record-type="3"><!-- T107 --><div class="t107"> <div class="t-align_center" itemscope="" itemtype="http://schema.org/ImageObject"><meta itemprop="image" content="https://static.tildacdn.com/tild3964-3639-4936-a361-613130616534/3_4.png"><meta itemprop="caption" content="Страница получения токена GitHub"> <img src="https://thumb.tildacdn.com/tild3964-3639-4936-a361-613130616534/-/format/webp/3_4.png" data-original="https://static.tildacdn.com/tild3964-3639-4936-a361-613130616534/3_4.png" class="t107__widthauto t-img loaded" imgfield="img" alt="Страница получения токена GitHub"> <div class="t-container_8"><div class="t-col t-col_8 t107__title t-text" style="" field="title" itemprop="name">Страница получения токена GitHub</div></div> </div> </div></div><div id="rec290234778" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">API может помочь в получении информации о пользователе, его репозиториях, подписчиках. Более того, не можно создавать новые файлы и репозитории, модифицировать имеющиеся. Чтобы ознакомиться со всеми возможностями, необходимо изучить документацию. <br></div></div></div></div></div><div id="rec291434491" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример логина и токена GitHub <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs">Логин: smartiqa-user
Токен: <span class="hljs-number">3</span>b7cbc8bbe0c7866ccd003c1ba21add68f6ddb31</code></pre> </div> </div> </div></div> </div><div id="rec291434584" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> requests
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.get(<span class="hljs-string">'https://api.github.com/user'</span>, auth=(<span class="hljs-string">'smartiqa-user'</span>, <span class="hljs-string">'3b7cbc8bbe0c7866ccd003c1ba21add68f6ddb31'</span>))
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.json()
{<span class="hljs-string">'login'</span>: <span class="hljs-string">'smartiqa-user'</span>, <span class="hljs-string">'id'</span>: <span class="hljs-number">713123083</span>, …<span class="hljs-string">'type'</span>: <span class="hljs-string">'User'</span>, <span class="hljs-string">'site_admin'</span>: <span class="hljs-keyword">False</span>, <span class="hljs-string">'name'</span>: <span class="hljs-string">'Smartiqa Programming and QA'</span>, <span class="hljs-string">'company'</span>: <span class="hljs-keyword">None</span>, <span class="hljs-string">'blog'</span>: <span class="hljs-string">''</span>, <span class="hljs-string">'location'</span>: <span class="hljs-string">'Russia'</span>}</code></pre> </div> </div> </div></div> </div><div id="rec290234780" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Часть информации вырезана, для краткости. В ответе мы получим такие данные: логин, имя, данные об аккаунте, аватарке, подписчиках, правах, времени создания и т.п. <br> <br>Если обратиться по другой ссылке (например, посмотреть все репозитории пользователя), API предоставит следующие сведения: <br></div></div></div></div></div><div id="rec291434834" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.get(<span class="hljs-string">'https://api.github.com/user/repos'</span>, auth=(<span class="hljs-string">'smartiqa-user'</span>, <span class="hljs-string">'3b7cbc8bbe0c7866ccd003c1ba21add68f6ddb31'</span>))
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.json()
[{<span class="hljs-string">'id'</span>: <span class="hljs-number">281217463</span>, <span class="hljs-string">'node_id'</span>: <span class="hljs-string">'MDEwOlJlcG9zaXRvcnkyODEyMTc0NjM='</span>, <span class="hljs-string">'name'</span>: <span class="hljs-string">'blog'</span>, <span class="hljs-string">'full_name'</span>: <span class="hljs-string">'smartiqaorg/blog'</span>, <span class="hljs-string">'private'</span>: <span class="hljs-keyword">True</span>, <span class="hljs-string">'owner'</span>: {<span class="hljs-string">'login'</span>: <span class="hljs-string">'smartiqaorg'</span>, <span class="hljs-string">'id'</span>: <span class="hljs-number">44243438</span>, <span class="hljs-string">'node_id'</span>: <span class="hljs-string">'MDEyOk9yZ2FuaXphdGlvbjQ0MjQzNDM4'</span>, <span class="hljs-string">'avatar_url'</span>: <span class="hljs-string">'https://avatars.githubusercontent.com/u/44243438?v=4'</span>,
...
<span class="hljs-string">'archived'</span>: <span class="hljs-keyword">False</span>, <span class="hljs-string">'disabled'</span>: <span class="hljs-keyword">False</span>, <span class="hljs-string">'open_issues_count'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'license'</span>: <span class="hljs-keyword">None</span>, <span class="hljs-string">'forks'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'open_issues'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'watchers'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'default_branch'</span>: <span class="hljs-string">'main'</span>, <span class="hljs-string">'permissions'</span>: {<span class="hljs-string">'admin'</span>: <span class="hljs-keyword">True</span>, <span class="hljs-string">'push'</span>: <span class="hljs-keyword">True</span>, <span class="hljs-string">'pull'</span>: <span class="hljs-keyword">True</span>}}]
</code></pre> </div> </div> </div></div> </div><div id="rec291434899" class="r t-rec t-rec_pt_0 t-rec_pb_60 r_anim r_showed" style="padding-top:0px;padding-bottom:60px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Ответ занимает несколько страниц (здесь приводится только часть, так как он большой по объему), если у вас имеется хотя бы <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">2-3</span></strong> репозитория: названия, ссылки, комментарии и исправления, обновление, структура и т.п. <br></div></div></div></div></div><div id="rec291435238" class="r t-rec t-rec_pt_90 t-rec_pb_15 r_anim r_showed" style="padding-top:90px;padding-bottom:15px; " data-record-type="128"><!-- T120 --><div class="t120"> <div class="t-container t-align_left"> <div class="t-col t-col_8 t-prefix_2"> <h2 class="t120__title t-heading t-heading_sm" field="title" style="">6. Практика: Сессии и прокси <br></h2> </div> </div></div></div><div id="rec291435423" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Сайты, особенно высоконагруженные, не очень любят видеть на своих страницах роботов (если они не одобрены, для чего часто внедряют API). Те, кто сталкивался с парсингом ресурсов, могли не раз убедиться, что со временем сервисы закрывают доступ по вашему IP или на основании пересылаемых модулем <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">Requests </span></strong>данных. В каждом случае решение проблемы индивидуально. Однако имеются базовые приемы, снижающие вероятность блокировки работы вашего скрипта. <br> <br>Сделаем стандартный запрос на главную страницу сайта<strong><strong data-redactor-tag="strong"> </strong><a href="https://www.python.org"><span style="color: rgb(0, 124, 119);">https://www.python.org</span></a></strong>. <br></div></div></div></div></div><div id="rec291435619" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> requests
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.get(<span class="hljs-string">'https://www.python.org/'</span>)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.request.headers
{<span class="hljs-string">'User-Agent'</span>: <span class="hljs-string">'python-requests/2.25.1'</span>, <span class="hljs-string">'Accept-Encoding'</span>: <span class="hljs-string">'gzip, deflate'</span>, <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'*/*'</span>, <span class="hljs-string">'Connection'</span>: <span class="hljs-string">'keep-alive'</span>}</code></pre> </div> </div> </div></div> </div><div id="rec291435711" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Строка<span style="color: rgb(0, 124, 119);"><strong> response.request.headers</strong> </span>отображает отправляемые нами заголовки на сайт. В качестве юзер-агента указана библиотека <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">requests</span></strong>, что не очень хорошо, так как любой нормальный сервис вас сразу же забанит при частых запросах. Его стоит поменять на реальный, как у «живого» человека. <br></div></div></div></div></div><div id="rec291435785" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> requests
<span class="hljs-prompt">&gt;&gt;&gt; </span>user_agent = {<span class="hljs-string">'user-agent'</span>: <span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span>
                            <span class="hljs-string">'Chrome/89.0.4389.72 Safari/537.36'</span>}
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.get(<span class="hljs-string">'https://www.python.org/'</span>, headers=user_agent)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.request.headers
{<span class="hljs-string">'user-agent'</span>: <span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.72 Safari/537.36'</span>, <span class="hljs-string">'Accept-Encoding'</span>: <span class="hljs-string">'gzip, deflate'</span>, <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'*/*'</span>, <span class="hljs-string">'Connection'</span>: <span class="hljs-string">'keep-alive'</span>}</code></pre> </div> </div> </div></div> </div><div id="rec291435902" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">Как видим, сервер теперь думает, что мы вошли через браузер Chrome, например. Это не гарантирует отсутствие блокировки, но уменьшает ее шансы. <br> <br>На практике можно дополнительно пользоваться сессией и прокси-серверами: <br><ol><li>Сессии помогают сайту «запоминать» нас (со всеми параметрами), чтобы при каждом новом обращении к нему (отдельным страницам) не отправлять все заголовки заново, с нуля.</li><li>Прокси подменяют наш IP-адрес на другой, который пока что не находится в «черном списке». Следует понимать, что их использование не всегда имеет негативный оттенок. В частности, они могут ускорять маршрутизацию к ресурсам (которые находятся на другом конце планеты), обходить блокировку отдельных провайдеров или стран (когда требуется посетить ресурс, недоступный через ваш IP).</li></ol></div></div></div></div></div><div id="rec291436026" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="3"><!-- T107 --><div class="t107"> <div class="t-align_center" itemscope="" itemtype="http://schema.org/ImageObject"><meta itemprop="image" content="https://static.tildacdn.com/tild3464-6631-4238-b038-303666343036/4_4.png"><meta itemprop="caption" content="Схема работы прокси-сервера"> <img src="https://thumb.tildacdn.com/tild3464-6631-4238-b038-303666343036/-/format/webp/4_4.png" data-original="https://static.tildacdn.com/tild3464-6631-4238-b038-303666343036/4_4.png" class="t107__widthauto t-img loaded" imgfield="img" alt="Схема работы прокси-сервера"> <div class="t-container_8"><div class="t-col t-col_8 t107__title t-text" style="" field="title" itemprop="name">Схема работы прокси-сервера</div></div> </div> </div></div><div id="rec291436861" class="r t-rec t-rec_pt_0 t-rec_pb_0 r_anim r_showed" style="padding-top:0px;padding-bottom:0px; " data-record-type="106"><!-- T004 --><div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">В коде ниже ответы сервиса изменены в целях безопасности (на своем ПК вы увидите реальные значения). <br></div></div></div></div></div><div id="rec291436982" class="r t-rec t-rec_pt_30 t-rec_pb_30" style="padding-top:30px;padding-bottom:30px; " data-animationappear="off" data-record-type="285"><!-- t264 --><div class="t264"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div class="t264__title t-title t-title_xs" field="title"><div style="font-size:14px;" data-customstyle="yes">Пример – Интерактивный режим <br></div></div> <div class="t264__wrapper t-text t-text_xs" style="border: 0px solid #f8f8f8;"><pre><code class="python hljs"><span class="hljs-prompt">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> requests
<span class="hljs-prompt">&gt;&gt;&gt; </span>user_agent = {<span class="hljs-string">'user-agent'</span>: <span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span>
                            <span class="hljs-string">'Chrome/89.0.4389.72 Safari/537.36'</span>}
<span class="hljs-prompt">&gt;&gt;&gt; </span>proxy = {<span class="hljs-string">'http'</span>: <span class="hljs-string">'http://185.253.98.21:3128'</span>,
     	<span class="hljs-string">'https'</span>: <span class="hljs-string">'http://185.253.98.21:3128'</span>}
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = requests.get(<span class="hljs-string">'https://ramziv.com/ip'</span>)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.text
<span class="hljs-number">29.174</span><span class="hljs-number">.182</span><span class="hljs-number">.126</span>
<span class="hljs-prompt">&gt;&gt;&gt; </span>session = requests.Session()
<span class="hljs-prompt">&gt;&gt;&gt; </span>session.proxies.update(proxy)
<span class="hljs-prompt">&gt;&gt;&gt; </span>session.headers.update(user_agent)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response = session.get(<span class="hljs-string">'https://ramziv.com/ip'</span>)
<span class="hljs-prompt">&gt;&gt;&gt; </span>response.text
<span class="hljs-number">185.253</span><span class="hljs-number">.98</span><span class="hljs-number">.21</span>
 </code></pre> </div> </div> </div></div> <div class="t004"><div class="t-container "> <div class="t-col t-col_8 t-prefix_2"><div field="text" class="t-text t-text_md " style="font-size:18px;line-height:1.8;font-weight:400;">На странице <strong><span data-redactor-tag="span" style="color: rgb(0, 124, 119);">https://ramziv.com/ip</span> </strong>можно выяснить свой IP-адрес. В первом случае мы его не меняли (отобразился реальный), а потом с помощью сессий, прокси и заголовков мы подменили свои данные. <br></div></div></div></div></div>
